<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #screen {
        width: 300px;
        height: 200px;
        text-align: center;
        user-select: none; /* 사용자의 텍스트 선택을 지정함 */
      }

      #screen.wating {
        background-color: aqua;
      }

      #screen.ready {
        background-color: red;
        color: #fff;
      }

      #screen.now {
        background-color: greenyellow;
      }
    </style>
  </head>
  <body>
    <h1>반응속도 측정테스트</h1>
    <div id="screen" class="wating">
      <div id="result">클릭해서 시작하세요</div>
    </div>

    <script>
      let prevTime;
      let currentTime;
      let timerOn = false;

      const $screen = document.querySelector('#screen');
      const $wating = document.querySelector('.wating');
      const $result = document.querySelector('#result');
      // const $ready = document.createElement('.ready');
      // const $now = document.createElement('.now');
      const $div = document.createElement('div');
      const $button = document.createElement('button');
      $button.className = 'reset';
      let randomSecond = Math.trunc(Math.random() * 3 + 2) * 1000;

      const onReady = () => {
        $screen.className = 'ready';
      };

      $screen.addEventListener('click', e => {
        if (e.target.classList.contains('wating')) {
          $screen.classList.replace('wating', 'ready');
          $result.textContent = '초록색이 되면 클릭하세요';
          const timer = setTimeout(() => {
            // timerOn = true;
            $screen.classList.replace('ready', 'now');
            console.log('반응속도 측정 테스트 시작');
            prevTime = Date.now();
            console.log(prevTime);
          }, randomSecond);
        } else if (e.target.classList.contains('ready')) {
          $result.textContent = '클릭하세요!';
        } else if (e.target.classList.contains('now')) {
          // if (!timerOn) {
          //   return alert('성급합니다. 다시시작해주세요');
          // }

          currentTime = Date.now();
          console.log(currentTime);

          const currentScore = currentTime - prevTime;
          $result.textContent = `당신의 반응속도는 ${currentScore}ms 입니다!`;
        }
      });

      const onTimeCheck = () => {};

      // const reset = () => {
      //   $body.addEventListener('click', onTimeCheck);
      //   document.body.style.backgroundColor = 'blue';
      //   timerOn = false;
      //   prevTime = 0;
      //   currentTime = 0;
      // };

      // $body.addEventListener('click', onTimeCheck);
      // $button.addEventListener('click', reset);
    </script>
  </body>
</html>
